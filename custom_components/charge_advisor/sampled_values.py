"""
La classe OcppMeterValues si occupa di gestire le misure (meter_values) inviati dal ChargePoint al CentralSystem
"""

# ----------------------------------------------------------------------------------------------------------------------
# Python packages
# ----------------------------------------------------------------------------------------------------------------------

# ----------------------------------------------------------------------------------------------------------------------
# Home Assistant packages
# ----------------------------------------------------------------------------------------------------------------------

# ----------------------------------------------------------------------------------------------------------------------
# External packages
# ----------------------------------------------------------------------------------------------------------------------

# ----------------------------------------------------------------------------------------------------------------------
# Local packages
# ----------------------------------------------------------------------------------------------------------------------

# ----------------------------------------------------------------------------------------------------------------------
# Local files
# ----------------------------------------------------------------------------------------------------------------------

from .enums import OcppMisc


class OcppSampledValues:

    def __init__(self):
        self._sampled_values_by_timestamp: dict = {}

    def add_meter_value(self, meter_value: dict = {}):
        if OcppMisc.timestamp.name in meter_value and OcppMisc.sampled_value.name in meter_value:
            ts = meter_value[OcppMisc.timestamp.name]
            sv = meter_value[OcppMisc.sampled_value.name].copy()
            self._add_sampled_value(ts, sv)

    def _add_sampled_value(self, ts, sv):
        self._sampled_values_by_timestamp[ts] = sv

